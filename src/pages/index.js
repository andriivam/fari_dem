import Head from 'next/head';
import React from 'react';
import styles from '../styles/Home.module.css';
import ImageCard from '../../components/Cards/imageCard/image-card';
import ImageTextCard from '../../components/Cards/imageTextCard/image-text-card';
import TextCard from '../../components/Cards/textCard/textCard';
import { useContext } from 'react';
import { InputTypeContext } from '../../context/InputTypeContext';
import usePathValue from '../../handlers/path_handler';
import { serverSideTranslations } from 'next-i18next/serverSideTranslations';
import { useTranslation } from 'next-i18next';
import { useRouter } from 'next/router';


export default function Home({ setNextPageHref, languages }) {

  const { t } = useTranslation();
  // const router = useRouter();
  // const language = router.query.language || languages;
  // console.log({ language })
  // console.log(t('Step1'));


  const { selectedInputType, setSelectedInputType } = useContext(InputTypeContext);
  const { handleGetPathValue } = usePathValue();

  console.log({ selectedInputType })

  const handleSelectedInput = (inputType) => {
    setSelectedInputType((prevInputType) => (prevInputType === inputType ? null : inputType));
  };

  let pathValue = '/output';

  const handlePathValueClick = () => {
    handleGetPathValue(pathValue);
    setNextPageHref(pathValue);
    setSelectedInputType(null);
  };

  return (
    <>
      <Head>
        <title>FARI</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className={styles.container}>
        <div className={styles.headingInfo}>
          <h2 className={styles.header}>{t("Step1")}</h2>
          <p className={styles.inputParagraph}>
            {/* {t("inputParagraph", { lng: language })} */}
          </p>
        </div>
        <div className={styles.cartsDiv}>
          <ImageCard
            handleSelectedInput={() => handleSelectedInput('image')}
            selectedInputType={selectedInputType === 'image'}
            handlePathValueClick={handlePathValueClick}
          />
          <TextCard
            onClick={() => console.log('test')}
            handleSelectedInput={() => handleSelectedInput('text')}
            selectedInputType={selectedInputType === 'text'}
            handlePathValueClick={handlePathValueClick}
          />
          <ImageTextCard
            handleSelectedInput={() => handleSelectedInput('image + text')}
            selectedInputType={selectedInputType === 'image + text'}
            handlePathValueClick={handlePathValueClick}
          />

        </div>
      </div>
    </>
  )
}


// export async function getStaticProps(context) {
//   // extract the locale identifier from the URL
//   const { locale } = context

//   return {
//     props: {
//       // pass the translation props to the page component
//       ...(await serverSideTranslations(locale)),
//     },
//   }
// }

export async function getStaticProps(context) {
  // extract the locale identifier from the URL
  const { locale } = context

  const translations = await serverSideTranslations(locale, ['common'])

  return {
    props: {
      ...translations,
    },
  }
}